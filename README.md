# ğŸ“Š Daily Stock Summary - Automated Analysis

Automated Indonesian stock market news analysis using Claude Code.

## ğŸ”„ Complete Workflow

```
1. Scrape news â†’ 2. Preprocess â†’ 3. Claude Code analyzes â†’ 4. View on web server
```

## ğŸš€ Quick Start

### One-Command Setup & Run

```bash
# Install Python dependencies
pip install markdown requests beautifulsoup4

# Run complete analysis
bash run_daily_analysis.sh

# Start web server
python3 serve_report.py
```

Then open: **http://localhost:3131**

## ğŸ“ Files Overview

### Core Scripts
- **`main.py`** - Scrapes financial news from Indonesian sources
- **`claude_preprocess.py`** - Condenses articles for Claude analysis
- **`analysis_prompt.txt`** - Prompt template for Claude Code
- **`serve_report.py`** - Web server to display reports

### Automation Scripts
- **`prepare_news.sh`** - Runs steps 1-2 (scraping + preprocessing)
- **`run_daily_analysis.sh`** - Complete automation (steps 1-3)

### Generated Files
- **`news.txt`** - Raw scraped articles
- **`news_condensed.txt`** - Preprocessed articles for Claude
- **`daily_report.md`** - Final analysis report (generated by Claude)

## ğŸ¯ Manual Step-by-Step Usage

### Step 1: Scrape News
```bash
python3 main.py
```
Creates `news.txt` with latest financial news.

### Step 2: Preprocess for Claude
```bash
python3 claude_preprocess.py
```
Creates `news_condensed.txt` (optimized for Claude).

### Step 3: Run Claude Code Analysis
```bash
cat analysis_prompt.txt | claude --dangerously-disable-sandbox
```
Claude Code reads `news_condensed.txt` and generates `daily_report.md`.

### Step 4: View Report on Web
```bash
python3 serve_report.py
```
Visit: http://localhost:3131

## ğŸŒ Web Server Features

- âœ… Auto-converts Markdown to HTML
- âœ… Clean, responsive UI
- âœ… Auto-refresh every 5 minutes
- âœ… Manual refresh button
- âœ… Serves on `0.0.0.0:3131` (accessible from network)

## ğŸ”§ Configuration

### Change Web Server Port
Edit `serve_report.py`:
```python
PORT = 3131  # Change this
```

### Scraping Sources
Edit `main.py` - `get_sites()` function to add/remove sources.

### Analysis Style
Edit `analysis_prompt.txt` to customize Claude's analysis approach.

## ğŸ“… Daily Automation with Cron

Run analysis automatically every day at 9 AM:

```bash
# Edit crontab
crontab -e

# Add this line:
0 9 * * * cd /home/arboapin/ai/daily-stock-summary && bash run_daily_analysis.sh >> cron.log 2>&1
```

Then keep the web server running:
```bash
# Run in background with nohup
nohup python3 serve_report.py > server.log 2>&1 &
```

## ğŸ› ï¸ Troubleshooting

### "daily_report.md not found"
Run the analysis first:
```bash
bash run_daily_analysis.sh
```

### Claude Code not responding
Make sure Claude Code CLI is installed and accessible:
```bash
which claude
```

### Port 3131 already in use
Change port in `serve_report.py` or kill existing process:
```bash
lsof -ti:3131 | xargs kill -9
```

## ğŸ“¦ Dependencies

```bash
pip install requests beautifulsoup4 markdown
```

## ğŸ“ˆ Example Output

The generated `daily_report.md` includes:
- ğŸ“Š Market overview & sentiment
- ğŸ”¥ Most mentioned stocks
- ğŸ“ˆ Price movements & catalysts
- ğŸ’¡ Top 3 actionable recommendations
- ğŸ“° Individual article analysis

## âš ï¸ Disclaimer

This tool is for informational purposes only. Always conduct your own research before making investment decisions.

## ğŸ¤ Contributing

Feel free to customize the scripts for your needs!

---

**Created with â¤ï¸ using Claude Code**
